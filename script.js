// 18 = 18 or older
// Ages are as of 2011
var characters = [
    {
        name: "Taylor",
        cape_name: [
            "Skitter",
            "Weaver",
            "Khepri"
        ],
        age: 16,
        groups: [
            "Undersiders",
            "Wards"
        ],
        family: "Hebert"
    },
    {
        name: "Lisa",
        cape_name: [
            "Tattletale"
        ],
        age: 17,
        groups: [
            "Undersiders"
        ],
        family: "Livsey"
    },
    {
        name: "Rachel",
        cape_name: [
            "Bitch"
        ],
        age: 17,
        groups: [
            "Undersiders"
        ],
        family: ""
    },
    {
        name: "Brian",
        cape_name: [
            "Grue"
        ],
        age: 17,
        groups: [
            "Undersiders",
            "The Flock"
        ],
        family: "Laborn"
    },
    {
        name: "Alec",
        cape_name: [
            "Regent",
            "Hijack"
        ],
        age: 15,
        groups: [
            "Undersiders"
        ],
        family: "Vasil"
    },
    {
        name: "Aisha",
        cape_name: [
            "Imp"
        ],
        age: 13,
        groups: [
            "Undersiders"
        ],
        family: "Laborn"
    },
    {
        name: "Lily",
        cape_name: [
            "Flechette",
            "Foil"
        ],
        age: 17,
        groups: [
            "Wards",
            "Undersiders",
            "Needlepoints"
        ],
        family: ""
    },
    {
        name: "Sabah",
        cape_name: [
            "Parian"
        ],
        age: 18,
        groups: [
            "Undersiders",
            "Needlepoints"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Barker"
        ],
        age: 18,
        groups: [
            "Undersiders"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Biter"
        ],
        age: 18,
        groups: [
            "Undersiders"
        ],
        family: ""
    },
    {
        name: "Aiden",
        cape_name: [
            "Chicken Little"
        ],
        age: 5,
        groups: [
            "Undersiders",
            "Tenders"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Snuff"
        ],
        age: 18,
        groups: [
            "Undersiders"
        ],
        family: ""
    },
    {
        name: "Dennis",
        cape_name: [
            "Clockblocker"
        ],
        age: 16,
        groups: [
            "Wards",
            "The Flock"
        ],
        family: ""
    },
    {
        name: "Sophia",
        cape_name: [
            "Shadow Stalker"
        ],
        age: 15,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "Missy",
        cape_name: [
            "Vista"
        ],
        age: 13,
        groups: [
            "Wards",
            "Wardens"
        ],
        family: ""
    },
    {
        name: "Carlos",
        cape_name: [
            "Aegis"
        ],
        age: 17,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "Chris",
        cape_name: [
            "Kid Win"
        ],
        age: 14,
        groups: [
            "Wards",
            "The Flock"
        ],
        family: ""
    },
    {
        name: "Dean",
        cape_name: [
            "Gallant"
        ],
        age: 17,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Weld"
        ],
        age: 17,
        groups: [
            "Wards",
            "Irregulars"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Crucible"
        ],
        age: 15,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Toggle"
        ],
        age: 12,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "Colin",
        cape_name: [
            "Armsmaster",
            "Defiant"
        ],
        age: 18,
        groups: [
            "Protectorate",
            "Guild"
        ],
        family: ""
    },
    {
        name: "Hannah",
        cape_name: [
            "Miss Militia"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "Robin",
        cape_name: [
            "Velocity"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "Ethan",
        cape_name: [
            "Assault"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Battery"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "Rory",
        cape_name: [
            "Triumph"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: "Alcott"
    },
    {
        name: "Emily Piggot",
        cape_name: [],
        age: 18,
        groups: [
            "PRT"
        ],
        family: ""
    },
    {
        name: "Thomas Calvert",
        cape_name: [
            "Coil"
        ],
        age: 18,
        groups: [
            "PRT"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Dragon"
        ],
        age: 18,
        groups: [
            "Guild"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Narwhal"
        ],
        age: 18,
        groups: [
            "Guild",
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "Adam",
        cape_name: [
            "Skidmark"
        ],
        age: 18,
        groups: [
            "Merchants"
        ],
        family: ""
    },
    {
        name: "Sherell",
        cape_name: [
            "Squealer"
        ],
        age: 18,
        groups: [
            "Merchants"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Mush"
        ],
        age: 18,
        groups: [
            "Merchants"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Trainwreck"
        ],
        age: 18,
        groups: [
            "Merchants"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Whirlygig"
        ],
        age: 18,
        groups: [
            "Merchants"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Faultline"
        ],
        age: 18,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "Emily",
        cape_name: [
            "Spitfire"
        ],
        age: 15,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Newter"
        ],
        age: 16,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "Gregor",
        cape_name: [
            "the Snail"
        ],
        age: 18,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "Elle",
        cape_name: [
            "Labyrinth"
        ],
        age: 18,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Shamrock"
        ],
        age: 18,
        groups: [
            "Faultline's Crew"
        ],
        family: ""
    },
    {
        name: "Dinah Alcott",
        cape_name: [],
        age: 12,
        groups: [
            ""
        ],
        family: "Alcott"
    },
    {
        name: "Carol",
        cape_name: [
            "Brandish"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Mark",
        cape_name: [
            "Flashbang"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Neil",
        cape_name: [
            "Manpower"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Sarah",
        cape_name: [
            "Lady Photon"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Eric",
        cape_name: [
            "Shielder"
        ],
        age: 14,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Victoria",
        cape_name: [
            "Glory Girl",
            "Antares"
        ],
        age: 17,
        groups: [
            "New Wave",
            "Breakthrough"
        ],
        family: "New Wave"
    },
    {
        name: "Amy",
        cape_name: [
            "Panacea",
            "Red Queen"
        ],
        age: 17,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Crystal",
        cape_name: [
            "Lazerdream"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Mike",
        cape_name: [
            "Lightstar"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Jess",
        cape_name: [
            "Fleur"
        ],
        age: 18,
        groups: [
            "New Wave"
        ],
        family: "New Wave"
    },
    {
        name: "Francis Krouse",
        cape_name: [
            "Trickster"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Cody",
        cape_name: [
            "Perdition"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Jess",
        cape_name: [
            "Genesis"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Marissa",
        cape_name: [
            "Sundancer"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Luke",
        cape_name: [
            "Ballistic"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Oliver",
        cape_name: [],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "Noelle",
        cape_name: [
            "Echidna"
        ],
        age: 18,
        groups: [
            "Travellers"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Uber"
        ],
        age: 18,
        groups: [
            "U&L"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Leet"
        ],
        age: 18,
        groups: [
            "U&L"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Circus"
        ],
        age: 18,
        groups: [
            ""
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Accord"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "Jeanne",
        cape_name: [
            "Citrine"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Othello"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Lizardtail"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Ligeia"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Jacklight"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Codex"
        ],
        age: 18,
        groups: [
            "Ambassadors"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Doctor Mother"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "Rebecca",
        cape_name: [
            "Alexandria"
        ],
        age: 18,
        groups: [
            "Cauldron",
            "Protectorate",
            "PRT"
        ],
        family: ""
    },
    {
        name: "Keith",
        cape_name: [
            "Legend"
        ],
        age: 18,
        groups: [
            "Cauldron",
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "David",
        cape_name: [
            "Eidolon"
        ],
        age: 18,
        groups: [
            "Cauldron",
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "Kurt",
        cape_name: [
            "Harbinger",
            "Number Man",
            "Harbinger Clone"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine",
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "William Manton",
        cape_name: [],
        age: 18,
        groups: [
            "Slaughterhouse Nine",
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Siberian"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Doormaker"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Clairvoyant"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "The Slug"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Custodian"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "Fortuna",
        cape_name: [
            "Contessa"
        ],
        age: 18,
        groups: [
            "Cauldron"
        ],
        family: ""
    },
    {
        name: "Ashley",
        cape_name: [
            "Damsel of Distress I",
            "Damsel of Distress II",
            "Swansong"
        ],
        age: 18,
        groups: [
            "Deathchester",
            "Breakthrough"
        ],
        family: ""
    },
    {
        name: "Chris Elman",
        cape_name: [
            "Lab Rat",
            "Cryptid"
        ],
        age: 18,
        groups: [
            "Breakthrough"
        ],
        family: ""
    },
    {
        name: "Sveta",
        cape_name: [
            "Garrotte",
            "Tress"
        ],
        age: 18,
        groups: [
            "Irregulars",
            "Breakthrough"
        ],
        family: ""
    },
    {
        name: "Kenzie",
        cape_name: [
            "Optics",
            "Lookout"
        ],
        age: 7,
        groups: [
            "Wards",
            "Breakthrough",
            "Tenders"
        ],
        family: ""
    },
    {
        name: "Tristan",
        cape_name: [
            "Capricorn Red"
        ],
        age: 13,
        groups: [
            "Breakthrough",
            "Reach"
        ],
        family: "Vera"
    },
    {
        name: "Byron",
        cape_name: [
            "Capricorn Blue"
        ],
        age: 13,
        groups: [
            "Breakthrough",
            "Reach"
        ],
        family: "Vera"
    },
    {
        name: "Rain",
        cape_name: [
            "Precipice"
        ],
        age: 12,
        groups: [
            "Fallen",
            "Breakthrough",
            "Needlepoints"
        ],
        family: ""
    },
    {
        name: "Roman Vasil",
        cape_name: [],
        age: 8,
        groups: [
            "Heartbroken",
            "Needlepoints"
        ],
        family: "Vasil"
    },
    {
        name: "Juliette",
        cape_name: [
            "Catena"
        ],
        age: 9,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Chastity Vasil",
        cape_name: [],
        age: 13,
        groups: [
            "Heartbroken",
            "Needlepoints"
        ],
        family: "Vasil"
    },
    {
        name: "Darlene",
        cape_name: [
            "Syndicate"
        ],
        age: 6,
        groups: [
            "Heartbroken",
            "Tenders"
        ],
        family: "Vasil"
    },
    {
        name: "Candy",
        cape_name: [
            "Decadent"
        ],
        age: 7,
        groups: [
            "Heartbroken",
            "Tenders"
        ],
        family: "Vasil"
    },
    {
        name: "Aroa Vasil",
        cape_name: [],
        age: 9,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Samuel Vasil",
        cape_name: [],
        age: 12,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Florence Vasil",
        cape_name: [],
        age: 5,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Valentina Vasil",
        cape_name: [],
        age: 17,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Cherie",
        cape_name: [
            "Cherish"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine",
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Nicholas Vasil",
        cape_name: [],
        age: 18,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Guillaume Vasil",
        cape_name: [],
        age: 18,
        groups: [
            "Heartbroken"
        ],
        family: "Vasil"
    },
    {
        name: "Danny Hebert",
        cape_name: [],
        age: 18,
        groups: [
            "Parents"
        ],
        family: "Hebert"
    },
    {
        name: "Annette Hebert",
        cape_name: [],
        age: 18,
        groups: [
            "Parents"
        ],
        family: "Hebert"
    },
    {
        name: "June Livsey",
        cape_name: [],
        age: 18,
        groups: [
            "Parents"
        ],
        family: "Livsey"
    },
    {
        name: "Fred Livsey",
        cape_name: [],
        age: 18,
        groups: [
            "Parents"
        ],
        family: "Livsey"
    },
    {
        name: "May",
        cape_name: [
            "March"
        ],
        age: 16,
        groups: [
            "Megacluster",
            "Subway Cluster"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Homer"
        ],
        age: 18,
        groups: [
            "Subway Cluster"
        ],
        family: ""
    },
    {
        name: "Tori Heflin",
        cape_name: [],
        age: 18,
        groups: [
            "Smuggler Cluster",
            "Megacluster"
        ],
        family: ""
    },
    {
        name: "Bianca",
        cape_name: [
            "Goddess"
        ],
        age: 18,
        groups: [
            "Smuggler Cluster"
        ],
        family: ""
    },
    {
        name: "Megan",
        cape_name: [],
        age: 18,
        groups: [
            "Smuggler Cluster",
            "Megacluster"
        ],
        family: ""
    },
    {
        name: "Jace",
        cape_name: [],
        age: 18,
        groups: [
            "Smuggler Cluster",
            "Megacluster"
        ],
        family: ""
    },
    {
        name: "Bill",
        cape_name: [
            "Blood Priest"
        ],
        age: 18,
        groups: [
            "Smuggler Cluster"
        ],
        family: ""
    },
    {
        name: "Ysmine",
        cape_name: [],
        age: 18,
        groups: [
            "Smuggler Cluster"
        ],
        family: ""
    },
    {
        name: "Jack",
        cape_name: [
            "Slash"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "Ned",
        cape_name: [
            "Crawler"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "Alan",
        cape_name: [
            "Mannequin",
            "Sphere"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Shatterbird"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "Mimi",
        cape_name: [
            "Burnscar"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "Riley",
        cape_name: [
            "Bonesaw"
        ],
        age: 12,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Hatchetface"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Murder Rat"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Pagoda"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Night Hag"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Psychosoma"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Skinslip"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Nyx"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "Bradley",
        cape_name: [
            "Breed"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Chuckles"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Winter"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Crimson"
        ],
        age: 18,
        groups: [
            "Slaughterhouse Nine"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Chevalier"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Dovetail"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Adamant"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Ursa Aurora"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Prism"
        ],
        age: 18,
        groups: [
            "Protectorate"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Jouster"
        ],
        age: 17,
        groups: [
            "Wards"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Halo"
        ],
        age: 18,
        groups: [
            "Haven"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Rosary"
        ],
        age: 18,
        groups: [
            "Haven"
        ],
        family: ""
    },
    {
        name: "Nate",
        cape_name: [
            "Reconciliation"
        ],
        age: 13,
        groups: [
            "Haven"
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Lord of Loss"
        ],
        age: 18,
        groups: [
            ""
        ],
        family: ""
    },
    {
        name: "",
        cape_name: [
            "Nursery"
        ],
        age: 18,
        groups: [
            ""
        ],
        family: ""
    }
];

// Stolen from the Gaylor generator
var prompts = [
    { name: "First kiss", nsfw: false },
    { name: "Power-enforced blood drinking/vampirism", nsfw: false },
    { name: "Death fic", nsfw: false },
    { name: "Mind control", nsfw: false },
    { name: "Split in half/into multiple identities Fenton Ghost Catcher Style ", nsfw: false },
    { name: "Willing sacrifice", nsfw: false },
    { name: "Body sharing", nsfw: false },
    { name: "Twenty-four hours to live", nsfw: false },
    { name: "Exhibitionism", nsfw: true },
    { name: "Unhappy ending", nsfw: false },
    { name: "Sex pollen", nsfw: true },
    { name: "Hurt/Comfort", nsfw: false },
    { name: "Pet play", nsfw: true },
    { name: "Survive an Endbringer", nsfw: false },
    { name: "Somehow not dead/alive again/sudden resurrection", nsfw: false },
    { name: "Fingering", nsfw: true },
    { name: "Soulmate timers", nsfw: false },
    { name: "Codependent", nsfw: false },
    { name: "Fuck you/Fuck me yourself coward!!!", nsfw: true },
    { name: "Handcuffed together/Trapped in a small space", nsfw: false },
    { name: "Tentacle porn", nsfw: true },
    { name: "Crossover", nsfw: false },
    { name: "Power Rangers", nsfw: false },
    { name: "Against all odds", nsfw: false },
    { name: "Bodyswap", nsfw: false },
    { name: "Beach episode", nsfw: false },
    { name: "Alt trigger", nsfw: false },
    { name: "Master-brainwashing", nsfw: false },
    { name: "Enemies to friends to lovers", nsfw: false },
    { name: "Trans character", nsfw: false },
    { name: "Wuxia AU", nsfw: false },
    { name: "Denial", nsfw: true },
    { name: "You saved my life; now it's yours", nsfw: false },
    { name: "Bodyguard trope", nsfw: false },
    { name: "Florist shop AU", nsfw: false },
    { name: "Ziz bomb romance", nsfw: false },
    { name: "Bondage", nsfw: true },
    { name: "Sharing a bed", nsfw: true },
    { name: "Tentacle porn", nsfw: true },
    { name: "Sex toys", nsfw: true },
    { name: "Somnophilia", nsfw: true },
    { name: "Anal", nsfw: true },
    { name: "Guild member", nsfw: false },
    { name: "Traitor", nsfw: false },
    { name: "Incest", nsfw: true },
    { name: "Titanifaction", nsfw: false },
    { name: "Band AU", nsfw: false },
    { name: "New stepsibling(s)", nsfw: true },
    { name: "Ward era", nsfw: false },
    { name: "Vial cape/s", nsfw: false },
    { name: "Canon compliant", nsfw: false },
    { name: "Pre-canon", nsfw: false },
    { name: "EdenVerse", nsfw: false },
    { name: "They Lost AU", nsfw: false },
    { name: "Steampunk AU", nsfw: false },
    { name: "Moonshot AU", nsfw: false },
    { name: "Pokemon Trainer AU", nsfw: false },
    { name: "Forcefem", nsfw: true },
    { name: "Alt Endbringer / Alt Endbringer fight", nsfw: false },
    { name: "Forcemasc", nsfw: true },
    { name: "Mirrorverse", nsfw: false },
    { name: "Characters as Pok√©mon AU", nsfw: false },
    { name: "Willing Feminization", nsfw: true },
    { name: "PHO fic", nsfw: false },
    { name: "C53ed character(s) ", nsfw: false },
    { name: "Willing Masculinization", nsfw: true },
    { name: "Hero/Villain relationship", nsfw: false },
    { name: "Sudden pet adoption", nsfw: false },
    { name: "Stepsiblings", nsfw: true },
    { name: "Cauldron member(s) ", nsfw: false },
    { name: "Parahumans war", nsfw: false },
    { name: "Just a dream", nsfw: false },
    { name: "Birdcaged AU", nsfw: false },
];
var incestPrompts = [
    "Incest",
    "Stepsiblings",
    "New stepsibling(s)"
];

function getAgeCategory(age) {
    if (age <= 14) { return 14; }
    if (age >= 18) { return 18; }
    return 16;
}

function getFamily(character) {
    var family = character.family;
    if (family.length === 0) {
        return null;
    } else {
        return family;
    }
}

function getRandomEntry(array) {
    return array[Math.floor(Math.random() * array.length)];
}

function getCharacter(pickedChars, filteredChars, allowIncest) {
    if (allowIncest) {
        return getRandomEntry(filteredChars);
    } else {
        var pickedFamilies = new Set(pickedChars.map(char => getFamily(char)));
        while (true) {
            var character = getRandomEntry(filteredChars);
            var family = getFamily(character);
            if (family === null || !pickedFamilies.has(family)) {
                return character;
            }
        }
    }
}

function getAllowedAgeGroups(ageGroup14, ageGroup16, ageGroup18) {
    var allowedAges = [];
    if (ageGroup14) { allowedAges.push(14); }
    if (ageGroup16) { allowedAges.push(16); }
    if (ageGroup18) { allowedAges.push(18); }
    return allowedAges;
}

function getPrompt(enablePrompts, nsfwPrompts, allowIncest) {
    if (!enablePrompts) { return ""; }
    var promptList = prompts;
    if (!nsfwPrompts) {
        promptList = promptList.filter(prompt => !prompt.nsfw);
    }
    if (!allowIncest) {
        promptList = promptList.filter(prompt => !incestPrompts.includes(prompt.name));
    }
    return "<br />Prompt: " + getRandomEntry(promptList).name;
}

function formatName(character, showCapeNames) {
    if (character.name.length === 0) {
        return character.cape_name[0];
    } else if (character.cape_name.length === 0 || !showCapeNames) {
        return character.name;
    } else {
        return character.name + " (" + getRandomEntry(character.cape_name) + ")";
    }
}

function formatNames(characters, showCapeNames) {
    return characters.map(character => formatName(character, showCapeNames)).join("/");
}

var pickedChars = [];
window.reformatNames = () => {
    if (pickedChars.length > 0) {
        var output = document.getElementById("output");
        var sections = output.innerHTML.split("<br>");
        var prompt = "";
        if (sections.length > 1) { prompt = "<br>" + sections[1]; }
        var showCapeNames = document.getElementById("show-cape-names").checked;
        output.innerHTML = formatNames(pickedChars, showCapeNames) + prompt;
    }
}

document.getElementById("pick-chars").addEventListener("submit", function (e) {
    e.preventDefault();

    var ageGroup14 = document.getElementById("char-1-14").checked;
    var ageGroup16 = document.getElementById("char-1-16").checked;
    var ageGroup18 = document.getElementById("char-1-18").checked;
    var yearValues = document.getElementsByName("year");
    var year = 0;
    for (var i = 0, length = yearValues.length; i < length; i++) {
        if (yearValues[i].checked) {
            year = Number(yearValues[i].value);
            break;
        }
    }
    var numChars = document.getElementById("num-chars").value;
    var sameGroup = document.getElementById("same-group").checked;
    var allowIncest = document.getElementById("allow-incest").checked;
    var enablePrompts = document.getElementById("enable-prompts").checked;
    var nsfwPrompts = document.getElementById("nsfw-prompts").checked;
    var showCapeNames = document.getElementById("show-cape-names").checked;

    pickedChars = [];
    if (numChars > 0) {
        var allowedAges = getAllowedAgeGroups(ageGroup14, ageGroup16, ageGroup18);
        var filteredChars = characters.filter(char => allowedAges.includes(getAgeCategory(char.age + year)));
        if (filteredChars.length > 0) {
            var firstChar = getRandomEntry(filteredChars);
            pickedChars.push(firstChar);
            if (sameGroup) {
                var filteredChars = characters.filter(char => getAgeCategory(char.age + year) === getAgeCategory(firstChar.age + year));
            }
            for (var i = 0; i < numChars - 1; i++) {
                pickedChars.push(getCharacter(pickedChars, filteredChars, allowIncest));
            }

            document.getElementById("output").innerHTML = formatNames(pickedChars, showCapeNames) + getPrompt(enablePrompts, nsfwPrompts, allowIncest);
        } else {
            document.getElementById("output").innerHTML = "No characters matching filters"
        }
    } else {
        document.getElementById("output").innerHTML = "Enter a number of characters greater than 0"
    }
});